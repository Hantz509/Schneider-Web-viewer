# Omniverse Web Viewer Sample Application

Omniverse Web Viewer Sample with Dynamic Camera Switching
A web-based viewer for streaming NVIDIA Omniverse Kit applications with enhanced camera control functionality. This sample demonstrates how to integrate custom USD files with predefined camera viewpoints and enable dynamic camera switching between web clients and Kit applications.


Table of Contents

Features
Prerequisites
Installation
Configuration
Usage
Camera Switching
Adding Custom USD Files
Troubleshooting

Features

Web-based 3D Visualization: Stream Omniverse Kit applications to web browsers via WebRTC
Dynamic Camera Control: Switch between predefined camera viewpoints and free navigation mode
Multiple Streaming Options: Support for local, OKAS (Omniverse Kit Application Streaming), and GDN deployments
Custom USD Integration: Load custom USD files with embedded camera definitions
Bidirectional Messaging: Real-time communication between web client and Kit application
Interactive Viewport: Full navigation controls (orbit, pan, zoom, fly mode)



Prerequisites
Hardware Requirements

NVIDIA RTX GPU (RTX 3070 or better recommended)
16GB RAM minimum

Software Requirements

Node.js (v18.0.0 or higher)
npm (v10.0.0 or higher)
Chromium-based browser (Chrome, Edge, etc.)
NVIDIA Omniverse Kit (v107.3.1 or higher)
Kit-app-template



Omniverse Setup

USD Viewer application built from kit-app-template
Messaging extension enabled in Kit application



## Quick Start

This section describes how to run the solution in dev mode on a local workstation.

1. Make sure the [prerequisites](#prerequisites) are fulfilled. Refer to the [package.json's engine section](package.json#L10-11) for the minimum Node.js and npm versions required to run this application. To verify your Node.js and npm installations, run these commands and it should print the version numbers:

```bash
node -v
npm -v
```

2. Launch a streaming Kit application based on the [USD Viewer Template](https://github.com/NVIDIA-Omniverse/kit-app-template/tree/main/templates/apps/usd_viewer).

3. Clone this repository:

```bash
https://github.com/Hantz509/Schneider-Web-viewer.git
```

4. Navigate into the project:

```bash
cd web-viewer-sample
```

5. Install dependencies:

```bash
npm install
```

> **_NOTE:_**  A new terminal is needed for `npm` commands if Node.js was recently installed.

If you encounter the following `Unsupported engine` warning, it indicates that you do not have the correct Node.js or npm version installed for this application and your app may not work as expected. Refer to the [package.json's engine section](package.json#L10-11) for the minimum required versions.

```bash
npm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@nvidia/web-viewer-sample@1.4.0',
npm warn EBADENGINE   required: { node: '^18.0.0', npm: '^10.0.0' },
npm warn EBADENGINE   current: { node: '17.0.0', npm: '10.9.2' }
npm warn EBADENGINE }
```

6. Configure your stream settings. By default, this client is configured for local streaming. Please see [Stream Configuration](#stream-configuration) for Omniverse Kit App Streaming or GDN configuration.

7. Run the client:

```bash
npm run dev
```

8. Open a Chromium browser and navigate to [localhost:5173](localhost:5173).
 
At this point you should see options for configuring the client. Refer to the [Client UI](#client-ui) section for an overview of these options. 

> **_NOTE:_**  When running this application in a container, you can serve the optimized production files generated by `npm run build`, rather than starting the development server. After running `npm run build`, the static files will be located in the `dist` directory.

### Stream Configuration

This section describes the required settings in the [stream.config.json](stream.config.json) for local, Omniverse Kit App Streaming and GDN deployments.

#### Local

Local streaming is used when connecting directly to a running Kit app. To use this option, set the source field to `"local"` in the [stream.config.json](stream.config.json#L3). You can also set the IP address in the stream.config.json's [local streaming options section](stream.config.json#L18).

#### Omniverse Kit App Streaming

Omniverse Kit App Streaming (OKAS) is an API that provides Kit app streaming on demand. Set the `source` field to `"stream"` in the [stream.config.json](stream.config.json#L3). You can also provide a default [app server](stream.config.json#L7) and [stream server](stream.config.json#L8), but these values aren't required as you can set them in the `Server Information` form when you run this sample.

#### GDN

GDN also provides Kit app streaming on demand like Omniverse Kit App Streaming does but needs a different set of configurations. For this option, set the `source` field to `"gfn"` in the [stream.config.json](stream.config.json#L3). Values for [catalogClientId](stream.config.json#L12), [clientId](stream.config.json#L13) and [cmsId](stream.config.json#14) are also required.

### Client UI

When running this client, you will be presented with forms to configure options prior to the stream launching. These
options will vary depending on the stream source defined in the [stream.config.json](stream.config.json) file.  

All stream sources will initially display a prompt for selecting the UI Option. Selecting `UI for default streaming USD Viewer app` will include a UI
for sending messages to a running Kit application. This is necessary for the USD Viewer template, which in the default use
case requires a client to send a request to open a file.


Camera Switching
Overview
This sample includes enhanced camera switching functionality, demonstrated with the MEP_Schneider USD file that contains predefined architectural camera viewpoints.
Available Camera Modes

Free Camera: User-controlled navigation (default)
Fixed Cameras: Predefined viewpoints (e.g., P5A, P5B, P5C, P5D for MEP_Schneider)

Using the Camera Selector
When a USD file with embedded cameras is loaded (like MEP_Schneider):

Camera Selector Appears: A dropdown in the top-right shows available cameras
Switch Cameras: Select any camera from the dropdown

Free Camera: Enables full navigation control
P5A, P5B, P5C, P5D: Locks to specific architectural viewpoints


Navigate: In Free Camera mode, use standard viewport controls

Viewport Navigation Controls
Click the viewport to activate, then use:

Orbit: ALT + Left Mouse Drag
Pan: Middle Mouse Drag
Zoom: ALT + Right Mouse Drag OR Scroll Wheel
Fly Mode: Hold Right Mouse Button + WASD keys

W: Forward
S: Backward
A: Left
D: Right
Q: Down
E: Up
Scroll Wheel: Adjust speed





## License

Development using the Omniverse Kit SDK is subject to the licensing terms detailed [here](https://docs.omniverse.nvidia.com/install-guide/latest/common/NVIDIA_Omniverse_License_Agreement.html).

This project will download and install additional third-party open source software projects. Review the license terms of these open source projects before use.

## Contributing

We provide this source code as-is and are currently not accepting outside contributions.
